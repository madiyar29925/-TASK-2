import java.io.*;
import java.util.ArrayList;
import java.util.Scanner;
import exception.Exceptions;
import model.OptionSet.Option;

public class Automobile implements Serializable {
	
	private static final long serialVersionUID = 1L;
	private String name;
	private String make;
	private String model;
  private int year;
	private int price;
	public ArrayList<OptionSet> opset = new ArrayList<OptionSet>();


	public Automobile() {
		super();
	}

	
	public String getMake() {
		return make;
	}


	public String getModel() {
		return model;
	}

	
	public void setMake(String make) {
		this.make = make;
	}

	
	public void setModel(String model) {
		this.model = model;
	}

	
	public String getOptionChoice(String setname) {
		return findOptionSet(setname).choice.name;
	}

	
	public float getOptionChoicePrice(String setname) {
		return findOptionSet(setname).choice.price;
	}

	
	public void setOptionChoice(String setname, String optionname) {
		findOptionSet(setname).choice = findOptionSet(setname).findOption(
				optionname);
	}

	public int getTotalPrice() {
		int totalprice = baseprice;
		for (int i = 0; i < opset.size(); i++) {
			totalprice += getOptionChoicePrice(opset.get(i).getName());
		}
		return totalprice;
	}


	public String getName() {
		return name;
	}

	
	public int getprice() {
		return baseprice;
	}

	
	public OptionSet getOpset(int index) {
		return opset.get(index);
		
	}

	
	public OptionSet findOptionSet(String name) {
		for (int i = 0; i < opset.size(); i++) {
			if (opset.get(i).name.equals(name)) {
				return opset.get(i);
			}
		}
		return null;
	}

	
	public Option findOption(String name) {
		for (int i = 0; i < opset.size(); i++) {
			opset.get(i).findOption(name);
		}
		return null;
	}


	public void setName(String name) {
		this.name = name;
	}


	public void setprice(int price) {
		this.price=price;
	}

	
	public void setOptionset(int optionsetsize) {

		for (int i = 0; i < optionsetsize; i++) {
			OptionSet optionset = new OptionSet();
			opset.add(optionset);
		}
	}

	
	public void setOption(OptionSet opset, int optionsize) {
		opset.setOption(optionsize);
	}

	
	public void deleteOption(int indexoptset, int indexopt) {
		opset.get(indexoptset).deleteOptionp(indexopt);
	}

	
	public void deleteOpset(int index) {
		opset.set(index, null);
	}

	
	public void updateOpset() {
		ArrayList<OptionSet> newopset = new ArrayList<OptionSet>();
		int index = 0;
		for (int i = 0; i < opset.size(); i++) {
			if (opset.get(i) != null) {
				newopset.set(index, opset.get(i));
				index++;
			}
		}
		opset = newopset;
	}


	public void updateOption() {
		ArrayList<OptionSet> newopset = new ArrayList<OptionSet>();
		for (int i = 0; i < opset.size(); i++) {
			opset.get(i).updateOption();
		}
		opset = newopset;
	}


	public void print() {
		StringBuffer sb = new StringBuffer();
		sb.append("The name of the vehicle is: ");
		sb.append(name);
		sb.append("\nThe base price of the vehicle is: ");
		sb.append(baseprice);
		System.out.println(sb);
		for (int i = 0; i < opset.size(); i++) {
			opset.get(i).print();
		}
	}


	public void setOptionValue(int index, int index2, String value) {
		opset.get(index2).setOptionValue(index, value);
	}

	
	public void setOptionPrice(int index, int index2, int price) {
		opset.get(index2).setOptionPrice(index, price);
	}


	public void setOptionsetName(int index, String string) {
		opset.get(index).name = string;
	}

	public synchronized void makeChoice() throws Exceptions {
		System.out
				.println("Choose in the following OptionSets:[Input option name]");
		Scanner scanner = new Scanner(System.in);
		for (int i = 0; i < opset.size(); i++) {
			System.out.println("OptionSet:" + opset.get(i).getName());
			System.out.println("Available options are:");
			for (int j = 0; j < opset.get(i).getOpt().size(); j++) {
				System.out.println(opset.get(i).getOpt().get(j));
			}
			String chose = scanner.nextLine();
			boolean match = false;
			for (int j = 0; j < opset.get(i).getOpt().size(); j++) {
				if (opset.get(i).getOpt().get(j).getName().equals(chose)) {
					opset.get(i).setChoice(opset.get(i).findOption(chose));
					opset.get(i).getChoice().setName(chose);
					opset.get(i).getChoice()
							.setPrice(opset.get(i).getOpt().get(j).getPrice());
					match = true;
				}
			}
			if (!match) {
				throw new Exceptions(5, "The selected choice is not available!");
			}
		}
	}

	public synchronized void printChoice() {
		System.out.println("Choices are:");
		float sum=baseprice;
		for (int i = 0; i < opset.size(); i++) {
			OptionSet os = opset.get(i);
			Option choice = os.getChoice();
			sum+=choice.getPrice();
			System.out.println(choice.getName() + " : " + choice.getPrice());
		}
		System.out.println("The total price is: " + sum);
		
	}
